---
title: Productivity
layout: layout.njk
---

<div class="intro-grid">
	<div>
		<h2>Pomodoro Body-Double Noise</h2>
		<p>Timer and your noisy friends</p>
	</div>
	<section class="card" id="pomodoro" style="position:relative;overflow:hidden">
		<h3 style="margin-top:0;">Pomodoro Timer</h3>
		<div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap">
			<div id="timeDisplay" style="font-size:clamp(2rem,6vw,3rem);font-weight:800;letter-spacing:0.06em;min-width:9ch;text-align:center">00:00</div>
			<div style="display:flex;gap:.5rem;flex-wrap:wrap">
				<button class="btn" data-min="15" type="button">15</button>
				<button class="btn" data-min="30" type="button">30</button>
				<button class="btn" data-min="45" type="button">45</button>
				<button class="btn" data-min="60" type="button">60</button>
				<button class="btn" id="btnReset" type="button" style="background:#444;">Reset</button>
				<button class="btn" id="btnBatSignal" type="button" title="Deploy Bat Signal" style="background:#8a1538;border:1px solid #c44;">üö® Bat Signal</button>
			</div>
		</div>
		<canvas id="fw" width="800" height="300" style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none;opacity:0;transition:opacity .3s ease"></canvas>

		<!-- Bat Signal Overlay -->
		<div id="batOverlay" aria-hidden="true" style="display:none;position:absolute;inset:0;z-index:5;background:radial-gradient(120%_80% at 50% 100%, rgba(0,0,0,0.0), rgba(0,0,0,0.65) 60%, rgba(0,0,0,0.8));backdrop-filter:blur(1px)">
			<!-- Spotlight cone -->
			<div style="position:absolute;left:50%;bottom:0;transform:translateX(-50%);"><svg width="320" height="320" viewBox="0 0 320 320" style="opacity:.9;filter:drop-shadow(0 6px 18px rgba(255,255,180,.3))">
				<defs>
					<radialGradient id="beam" cx="50%" cy="5%" r="80%">
						<stop offset="0%" stop-color="#fff9b1" stop-opacity="0.95"/>
						<stop offset="30%" stop-color="#fff4a0" stop-opacity="0.65"/>
						<stop offset="80%" stop-color="#ffd84d" stop-opacity="0.05"/>
					</radialGradient>
				</defs>
				<g>
					<ellipse cx="160" cy="60" rx="80" ry="60" fill="url(#beam)"/>
					<path d="M140,110 L180,110 L300,310 L20,310 Z" fill="url(#beam)"/>
				</g>
			</svg></div>
			<!-- Signal badge (bat-ish) -->
			<div style="position:absolute;left:50%;top:16px;transform:translateX(-50%);text-shadow:0 4px 10px rgba(255,215,0,.3);font-size:42px">ü¶á</div>
			<!-- Modal phone box -->
			<div id="batModal" role="dialog" aria-modal="true" style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#121225;border:1px solid #ffffff22;border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,.45);padding:1rem;min-width:min(92vw,420px)">
				<div style="display:flex;gap:.75rem;align-items:center">
					<div style="width:60px;height:60px;display:grid;place-items:center;background:#a40021;border-radius:50%;box-shadow:0 0 0 0 rgba(164,0,33,.6);animation:ringPulse 1.2s ease-out infinite">
						<span style="font-size:32px">‚òéÔ∏è</span>
					</div>
					<div style="flex:1">
						<div id="batTitle" style="font-weight:700">Bat signal deployed - Dad on his way</div>
						<div id="batStatus" style="opacity:.9;font-size:.95rem;margin-top:.15rem">Ringing the red phone‚Ä¶</div>
					</div>
				</div>
				<div style="display:flex;gap:.5rem;justify-content:flex-end;margin-top:1rem">
					<button class="btn btn-small" id="btnBatMute" style="background:#444">Mute</button>
					<button class="btn btn-small" id="btnBatText" style="background:#2a2a4a">Text Dad</button>
					<button class="btn btn-small" id="btnBatClose" style="background:#5a2233">Close</button>
				</div>
			</div>
		</div>
	</section>
</div>

<section class="card" style="margin-bottom:1rem;border:1px solid rgba(255,255,255,0.18)">
	<h3 style="margin-top:0;">Focus Space</h3>
	<div class="grid" style="display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));align-items:start;">
		<section class="card">
		<h3>Grab your body double for study</h3>
		<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
			<iframe
				src="https://www.youtube-nocookie.com/embed/6-5ZigstWi4?si=JqMRiLRbS7xfYPDQ"
				title="YouTube video player"
				frameborder="0"
				allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
				referrerpolicy="strict-origin-when-cross-origin"
				allowfullscreen
				style="position:absolute;top:0;left:0;width:100%;height:100%;"
			></iframe>
		</div>
		</section>

		<section class="card">
		<h3>Brown Noise</h3>
		<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
			<iframe
				src="https://www.youtube-nocookie.com/embed/6bPN0JyGfA4?si=ReYl6tbDOzfY7wpz&start=4"
				title="YouTube video player"
				frameborder="0"
				allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
				referrerpolicy="strict-origin-when-cross-origin"
				allowfullscreen
				style="position:absolute;top:0;left:0;width:100%;height:100%;"
			></iframe>
		</div>
		</section>

		<script>
		// Bat Signal overlay + SMS trigger
		(function(){
			const btn = document.getElementById('btnBatSignal');
			if(!btn) return;
			const overlay = document.getElementById('batOverlay');
			const modal = document.getElementById('batModal');
			const btnClose = document.getElementById('btnBatClose');
			const btnMute = document.getElementById('btnBatMute');
			const btnText = document.getElementById('btnBatText');
			const statusEl = document.getElementById('batStatus');
			const titleEl = document.getElementById('batTitle');
			let audio, ringing = false, smsSent = false;

			function ensureAudio(){
				if(audio) return audio;
				audio = new Audio('https://cdn.pixabay.com/download/audio/2022/03/15/audio_f1783f3a94.mp3?filename=old-telephone-ring-105957.mp3');
				audio.loop = true;
				audio.volume = 0.6;
				return audio;
			}
			async function startRing(){
				try{ ensureAudio(); await audio.play(); ringing = true; }catch{}
			}
			function stopRing(){ try{ audio?.pause(); ringing = false; }catch{} }

			async function sendSms(){
				if(smsSent) return;
				statusEl.textContent = 'Sending text‚Ä¶';
				try{
					const res = await fetch('/.netlify/functions/alert', {
						method: 'POST', headers: { 'content-type':'application/json' },
						body: JSON.stringify({ message: 'Bat signal deployed ring Charlotte' })
					});
					if(res.ok){ smsSent = true; statusEl.textContent = 'Text sent ‚úÖ'; }
					else { statusEl.textContent = 'Failed to send text'; }
				}catch{ statusEl.textContent = 'Failed to send text'; }
			}

			function openModal(){
				overlay.style.display = '';
				overlay.setAttribute('aria-hidden','false');
				titleEl.textContent = 'Bat signal deployed - Dad on his way';
				statusEl.textContent = 'Ringing the red phone‚Ä¶';
				smsSent = false; startRing();
			}
			function closeModal(){ overlay.style.display = 'none'; overlay.setAttribute('aria-hidden','true'); stopRing(); }

			btn.addEventListener('click', ()=>{ openModal(); sendSms(); });
			btnClose.addEventListener('click', closeModal);
			btnMute.addEventListener('click', ()=>{ if(ringing) stopRing(); else startRing(); });
			btnText.addEventListener('click', sendSms);
		})();

		// ring pulse keyframes
		const style = document.createElement('style');
		style.textContent = `@keyframes ringPulse { 0%{box-shadow:0 0 0 0 rgba(164,0,33,.6)} 70%{box-shadow:0 0 0 18px rgba(164,0,33,0)} 100%{box-shadow:0 0 0 0 rgba(164,0,33,0)} }`;
		document.head.appendChild(style);
		</script>

		<section class="card">
			<h3>Outer Space Charlienaut</h3>
			<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
				<iframe
					src="https://www.youtube-nocookie.com/embed/yLOM8R6lbzg?si=_4SOXjvVTAWbAHm0&start=4"
					title="YouTube video player"
					frameborder="0"
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
					referrerpolicy="strict-origin-when-cross-origin"
					allowfullscreen
					style="position:absolute;top:0;left:0;width:100%;height:100%;"
				></iframe>
			</div>
		</section>

		<section class="card">
		<h3>Ambient Focus</h3>
		<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
			<iframe
				src="https://www.youtube-nocookie.com/embed/pmR04sf6FkA?si=yJ0C0zRa7xgVT6Hm&start=4"
				title="YouTube video player"
				frameborder="0"
				allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
				referrerpolicy="strict-origin-when-cross-origin"
				allowfullscreen
				style="position:absolute;top:0;left:0;width:100%;height:100%;"
			></iframe>
		</div>
		</section>
	</div>
</section>

<script>
// Simple Pomodoro with fireworks + spoken encouragement
(function(){
	const el = document.getElementById('pomodoro');
	const display = document.getElementById('timeDisplay');
	const btns = el.querySelectorAll('button[data-min]');
	const reset = document.getElementById('btnReset');
	const cvs = document.getElementById('fw');
	const ctx = cvs.getContext('2d');
	let endAt = 0, raf, tickTimer, particles = [], lastT = 0;

	function setSize(){
		const r = el.getBoundingClientRect();
		cvs.width = r.width; cvs.height = Math.max(240, r.height);
	}
	setSize();
	addEventListener('resize', setSize);

	function fmt(ms){
		const s = Math.max(0, Math.floor(ms/1000));
		const m = Math.floor(s/60).toString().padStart(2,'0');
		const ss = (s%60).toString().padStart(2,'0');
		return `${m}:${ss}`;
	}

	function start(min){
		endAt = Date.now() + min*60*1000;
		clearInterval(tickTimer);
		tickTimer = setInterval(tick, 250);
		tick();
	}
	function stop(){
		clearInterval(tickTimer); endAt = 0; display.textContent = '00:00';
		cvs.style.opacity = 0; cancelAnimationFrame(raf); particles=[];
	}
	function done(){
		clearInterval(tickTimer); display.textContent = '00:00';
		celebrate(); speak();
		try{ await window.Rewards?.award('pomodoro', 3, 'Pomodoro completed') }catch{}
	}
	function tick(){
		if(!endAt) return;
		const left = endAt - Date.now();
		if(left <= 0){ done(); return; }
		display.textContent = fmt(left);
	}

	// Fireworks (very light confetti)
	function celebrate(){
		particles=[]; cvs.style.opacity = 1; lastT = performance.now();
		for(let i=0;i<160;i++){
			const ang = Math.random()*Math.PI*2;
			const sp = 60 + Math.random()*140;
			particles.push({
				x: cvs.width/2, y: cvs.height*0.7,
				vx: Math.cos(ang)*sp, vy: Math.sin(ang)*sp*(-0.5),
				life: 1200+Math.random()*800,
				size: 2+Math.random()*3,
				color: `hsl(${Math.floor(Math.random()*360)},90%,65%)`
			});
		}
		raf = requestAnimationFrame(loop);
		setTimeout(()=>{ cvs.style.opacity = 0; }, 2200);
	}
	function loop(t){
		const dt = Math.min(50, t - lastT); lastT = t;
		ctx.clearRect(0,0,cvs.width,cvs.height);
		for(const p of particles){
			p.life -= dt; if(p.life<=0) continue;
			p.vy += 0.25; // gravity
			p.x += p.vx * dt/1000; p.y += p.vy * dt/1000;
			ctx.fillStyle = p.color; ctx.globalAlpha = Math.max(0, p.life/1400);
			ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
		}
		particles = particles.filter(p=>p.life>0 && p.y<cvs.height+10);
		if(particles.length>0) raf = requestAnimationFrame(loop);
	}

	function speak(){
		try{
			const u = new SpeechSynthesisUtterance('you are great just do one small thing - love you dad');
			u.rate = 1; u.pitch = 1; u.lang = 'en-US';
			speechSynthesis.speak(u);
		}catch{}
	}

	btns.forEach(b=>b.addEventListener('click', ()=> start(parseInt(b.dataset.min,10)) ));
	reset.addEventListener('click', stop);
})();
</script>

